{% extends "base.html" %}

{% block content %}

{% if status_to_show == "open" %}
    <h1>open todos</h1>
    <a href='/closed/'>show closed</a>|{% if comments %}<a href='/open/'>close comments</a>{% else %}<a href='/open_comments/'>show comments</a>{% endif %}
{% else %}
    <h1>closed todos</h1>
    <a href='/open/'>show open</a>|{% if comments %}<a href='/closed/'>close comments</a>{% else %}<a href='/closed_comments/'>show comments</a>{% endif %}
{% endif %}
<!--
<table>
    <tr>
        <td>Alfreds Futterkiste</td>
        <td>Maria Anders</td>
        <td>Germany</td>
      </tr>
      <tr>
        <td>Alfreds Futterkiste</td>
        <td>Maria Anders</td>
        <td>Germany</td>
      </tr>
</table>
-->

<table id="privat">
{% for id, todo in todos.todos.items() %}
    {% if todo.status == status_to_show and 'privat' in todo.tags %}
<tr>
{% if status_to_show == "open" %}
<td><a href="{{ url_for('close_todo', todo_id=todo.id) }}">close</a></td>
<td id="no_underline">{{ todo.id }} <a href="{{ url_for('edit_todo', todo_id=todo.id) }}">{{ todo.title }}</a></td>
<td id="no_underline">{% if todo.comments|length > 1 %} <a href="{{ url_for('one_comments', todo_id=todo.id, status=status_to_show) }}">+</a>{% endif %}</td>
{% else %}
<td><a href="{{ url_for('reopen_todo', todo_id=todo.id) }}">reopen</a></td>
<td id="no_underline">{{ todo.id }} <a href="{{ url_for('edit_todo', todo_id=todo.id) }}">{{ todo.title }}</a></td>
<td id="no_underline">{% if todo.comments|length > 1 %} <a href="{{ url_for('one_comments', todo_id=todo.id, status=status_to_show) }}">+</a>{% endif %}</td>
{% endif %}
</tr>
{% if comments and todo.comments|length > 1 %}
{% for c in todo.comments %}
<tr>
<td></td><td>&nbsp;&nbsp;- {{ c[0] }}</td><td>{{ c[1] }}</td>
</tr>
{% endfor %}
{% elif id_comments != None %}
{% if todo.id == id_comments %}
{% for c in todo.comments %}
<tr>
<td></td><td>&nbsp;&nbsp;- {{ c[0] }}</td><td>{{ c[1] }}</td>
</tr>
{% endfor %}
{% endif %}
{% endif %}
{% endif %}
{% endfor %}
</table>

<p>#################################################################################</p>

<table id="notprivat">
{% for id, todo in todos.todos.items() %}
{% if todo.status == status_to_show and 'privat' not in todo.tags %}
<tr>
{% if status_to_show == "open" %}
<td><a href="{{ url_for('close_todo', todo_id=todo.id) }}">close</a></td>
<td id="no_underline">{{ todo.id }} <a href="{{ url_for('edit_todo', todo_id=todo.id) }}">{{ todo.title }}</a></td>
<td id="no_underline">{% if todo.comments|length > 1 %} <a href="{{ url_for('one_comments', todo_id=todo.id, status=status_to_show) }}">+</a>{% endif %}</td>
{% else %}
<td><a href="{{ url_for('reopen_todo', todo_id=todo.id) }}">reopen</a></td>
<td id="no_underline">{{ todo.id }} <a href="{{ url_for('edit_todo', todo_id=todo.id) }}">{{ todo.title }}</a></td>
<td id="no_underline">{% if todo.comments|length > 1 %} <a href="{{ url_for('one_comments', todo_id=todo.id, status=status_to_show) }}">+</a>{% endif %}</td>
{% endif %}
</tr>
{% if comments and todo.comments|length > 1 %}
{% for c in todo.comments %}
<tr>
<td></td><td>&nbsp;&nbsp;- {{ c[0] }}</td><td>{{ c[1] }}</td>
</tr>
{% endfor %}
{% elif id_comments != None %}
{% if todo.id == id_comments %}
{% for c in todo.comments %}
<tr>
<td></td><td>&nbsp;&nbsp;- {{ c[0] }}</td><td>{{ c[1] }}</td>
</tr>
{% endfor %}
{% endif %}
{% endif %}
{% endif %}
{% endfor %}
</table>

{% endblock %}
